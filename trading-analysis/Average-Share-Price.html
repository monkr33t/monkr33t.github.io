<!DOCTYPE html>
<html>
<head>
    <title>Average Share Price Calculator</title>
    <style>
        table {
            width: 80%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        table, th, td {
            border: 1px solid black;
        }
        th, td {
            padding: 10px;
            text-align: center;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
    <script>
        function calculate() {
            let totalCostWithFees = 0;
            let totalCostWithoutFees = 0;
            let totalShares = 0;
            for (let i = 1; i <= 4; i++) {
                let price = parseFloat(document.getElementById('price' + i).value);
                let shares = parseFloat(document.getElementById('shares' + i).value);
                let fees = parseFloat(document.getElementById('fees' + i).value);
                let costBasisWithoutFees = price * shares;
                let costBasisWithFees = costBasisWithoutFees + fees;
                document.getElementById('costWithoutFees' + i).innerText = `$${costBasisWithoutFees.toFixed(2)}`;
                document.getElementById('costWithFees' + i).innerText = `$${costBasisWithFees.toFixed(2)}`;
                totalCostWithoutFees += costBasisWithoutFees;
                totalCostWithFees += costBasisWithFees;
                totalShares += shares;
            }
            document.getElementById('totalCostWithoutFees').innerText = `$${totalCostWithoutFees.toFixed(2)}`;
            document.getElementById('totalCostWithFees').innerText = `$${totalCostWithFees.toFixed(2)}`;
            document.getElementById('totalShares').innerText = totalShares;
            document.getElementById('averagePrice').innerText = `$${(totalCostWithFees / totalShares).toFixed(3)}`;
        }
    </script>
</head>
<body>

<h2>Average Share Price Calculator</h2>

<table>
    <thead>
        <tr>
            <th>Share Price</th>
            <th>Cost Basis (Without Fees)</th>
            <th>Cost Basis (With Fees)</th>
            <th>Number of Shares</th>
            <th>Fees</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><input type="number" id="price1" value="0.985" step="0.001" onchange="calculate()"></td>
            <td id="costWithoutFees1">$0.00</td>
            <td id="costWithFees1">$0.00</td>
            <td><input type="number" id="shares1" value="150" step="1" onchange="calculate()"></td>
            <td><input type="number" id="fees1" value="3" step="0.01" onchange="calculate()"></td>
        </tr>
        <tr>
            <td><input type="number" id="price2" value="1.55" step="0.001" onchange="calculate()"></td>
            <td id="costWithoutFees2">$0.00</td>
            <td id="costWithFees2">$0.00</td>
            <td><input type="number" id="shares2" value="45" step="1" onchange="calculate()"></td>
            <td><input type="number" id="fees2" value="3" step="0.01" onchange="calculate()"></td>
        </tr>
        <tr>
            <td><input type="number" id="price3" value="1.85" step="0.001" onchange="calculate()"></td>
            <td id="costWithoutFees3">$0.00</td>
            <td id="costWithFees3">$0.00</td>
            <td><input type="number" id="shares3" value="80" step="1" onchange="calculate()"></td>
            <td><input type="number" id="fees3" value="3" step="0.01" onchange="calculate()"></td>
        </tr>
        <tr>
            <td><input type="number" id="price4" value="2.2" step="0.001" onchange="calculate()"></td>
            <td id="costWithoutFees4">$0.00</td>
            <td id="costWithFees4">$0.00</td>
            <td><input type="number" id="shares4" value="35" step="1" onchange="calculate()"></td>
            <td><input type="number" id="fees4" value="3" step="0.01" onchange="calculate()"></td>
        </tr>
        <tr>
            <td>Total</td>
            <td id="totalCostWithoutFees">$0.00</td>
            <td id="totalCostWithFees">$0.00</td>
            <td id="totalShares">0</td>
            <td></td>
        </tr>
        <tr>
            <td>Average Price</td>
            <td colspan="4" id="averagePrice">$0.000</td>
        </tr>
    </tbody>
</table>

<script>
    // Initial calculation
    calculate();
</script>

</body>
</html>
